<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Katnallu ‚Äì Create Celebration</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #ffe5d0, #fff5ec);
}

.container {
  max-width: 420px;
  background: #fff;
  margin: 40px auto;
  padding: 25px;
  border-radius: 18px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

h2 {
  text-align: center;
  margin-bottom: 20px;
}

input, button {
  width: 100%;
  padding: 12px;
  margin-bottom: 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 15px;
}

input[type="file"] {
  padding: 8px;
}

button {
  border: none;
  cursor: pointer;
}

.btn-green {
  background: #28a745;
  color: white;
  font-size: 16px;
}

.btn-orange {
  background: orange;
  color: white;
}

.gift-row {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.gift-row input {
  flex: 1;
}

.link-box {
  background: #f3f3f3;
  padding: 10px;
  border-radius: 10px;
  word-break: break-all;
  margin-top: 10px;
  display: none;
}
</style>
</head>

<body>

<div class="container">
  <h2>üéâ Create Celebration</h2>

  <input id="occasion" placeholder="Occasion (Birthday, Housewarming)" />
  <input id="date" type="date" />
  <input id="upi" placeholder="Your UPI ID" />
  <input id="photo" type="file" accept="image/*" />

  <h3>üéÅ Gifts</h3>
  <div id="giftsContainer"></div>

  <button class="btn-orange" onclick="addGift()">+ Add Gift</button>

  <button class="btn-green" onclick="generateLink()">Save & Generate Link üîó</button>

  <div class="link-box" id="linkBox"></div>
</div>

<script>
const giftsContainer = document.getElementById("giftsContainer");

function addGift(name = "", amount = "") {
  const div = document.createElement("div");
  div.className = "gift-row";
  div.innerHTML = `
    <input placeholder="Gift name" value="${name}">
    <input type="number" placeholder="Amount" value="${amount}">
  `;
  giftsContainer.appendChild(div);
}

// Add first gift by default
addGift();

function generateLink() {
  const occasion = document.getElementById("occasion").value;
  const date = document.getElementById("date").value;
  const upi = document.getElementById("upi").value;

  if (!occasion || !date || !upi) {
    alert("Please fill all required fields");
    return;
  }

  const gifts = [];
  document.querySelectorAll(".gift-row").forEach(row => {
    const inputs = row.querySelectorAll("input");
    if (inputs[0].value && inputs[1].value) {
      gifts.push({
        name: inputs[0].value,
        amount: inputs[1].value
      });
    }
  });

  const data = {
    occasion,
    date,
    upi,
    gifts
  };

  const encoded = encodeURIComponent(JSON.stringify(data));
  const link = `${window.location.origin}${window.location.pathname.replace("index.html","")}contribute.html?data=${encoded}`;

  const box = document.getElementById("linkBox");
  box.style.display = "block";
  box.innerHTML = `<b>Share this link:</b><br>${link}`;
}
</script>

</body>
</html>
